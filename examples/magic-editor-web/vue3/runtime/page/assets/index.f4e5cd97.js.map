{"version":3,"file":"index.f4e5cd97.js","sources":["../../../../../../packages/ui/src/richtext/src/index.vue"],"sourcesContent":["<!-- Test.vue -->\n<template>\n  <div>\n    <span v-html=\"plainHtml\"></span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, watch } from 'vue';\n\nimport { MRichText } from '../../types';\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  name: 'richtext',\n\n  props: {\n    config: {\n      type: Object as PropType<MRichText>,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    useApp(props);\n    const plainHtml = ref();\n\n    watch(\n      () => props.config.html,\n      (html = '') => {\n        const isObject = typeof html === 'object';\n        const value = isObject ? html.text : html;\n        const formatterValue = value.replace(/(?!=font-size:\\s{0,})(\\d+)(pt|px)/g, '0.$1rem');\n\n        // if (isObject) {\n        //   const { indicator } = html;\n        //   if (indicator) {\n        //     formatterValue = formatterValue.replace(/{{(.+?)}}/g, (m, key) => indicator[key] || m);\n        //   }\n        // }\n        const span = document.createElement('span');\n        span.innerHTML = formatterValue;\n        const dynamicList: any = span.querySelectorAll('.magic-ui__dynamic-data-link');\n        for (let i = 0; i < dynamicList?.length; i++) {\n          const datavalue = dynamicList[i]?.getAttribute('data-value');\n          dynamicList[i].innerText = datavalue;\n        }\n        const htmlTemps = span.innerHTML;\n        plainHtml.value = htmlTemps;\n      },\n      {\n        immediate: true,\n      },\n    );\n\n    return {\n      plainHtml,\n    };\n  },\n});\n</script>\n"],"names":["_sfc_main","props","useApp","plainHtml","html","formatterValue","span","dynamicList","i","datavalue","_a","htmlTemps"],"mappings":"iFAaA,MAAeA,EAAA,IAAgB,gBAAA,CAAA,KAAA,WACvB,MAAA,CAEC,OAAA,CACG,KAAA,OACA,QAAA,KAAA,CAAA,EACW,EACnB,MAAA,CAEO,KAAA,OACC,QAAA,KAAA,CAAA,EACW,CACnB,EACF,MAAAC,EAAA,CAGEC,EAAAD,CAAA,EACA,MAAAE,EAAkB,IAAI,MAEtB,WAAA,MAAA,IAAAF,EAAA,OAAA,KACqB,CAAAG,EAAA,KAAA,OAIjB,MAAAC,GAFA,OAAAD,GAAA,SACAA,EAAA,KAAAA,GACA,QAAA,qCAAA,SAAA,EAQAE,EAAA,SAAA,cAAA,MAAA,EACAA,EAAA,UAAAD,EACA,MAAAE,EAAAD,EAAA,iBAAA,8BAAA,EACA,QAAAE,EAAA,EAAAA,GAAAD,GAAA,YAAAA,EAAA,QAAAC,IAAA,CACE,MAAAC,GAAAC,EAAAH,EAAAC,KAAA,YAAAE,EAAA,aAAA,cACAH,EAAAC,GAAA,UAAAC,CAA2B,CAE7B,MAAAE,EAAAL,EAAA,UACAH,EAAA,MAAAQ,CAAkB,EACpB,CACA,UAAA,EACa,CACb,EAGF,CAAO,UAAAR,CACL,CACF,CAEJ,CAAA"}