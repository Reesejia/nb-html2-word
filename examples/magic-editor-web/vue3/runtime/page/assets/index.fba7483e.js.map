{"version":3,"file":"index.fba7483e.js","sources":["../../../../../../packages/ui/src/text/src/index.vue"],"sourcesContent":["<template>\n  <div class=\"text-out-box\" :style=\"style\">\n    <div :style=\"{ width: '100%', height: '100%', boxShadow: boxshadow }\">\n      <!-- 嵌套一层解决背景渐变和文字渐变冲突 -->\n      <span :text=\"displayText\" :style=\"innerStyle\" :class=\"className\" class=\"inner-box\">{{ displayText }}</span>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType } from 'vue';\n\nimport { MText } from '../../../src/types';\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MText>,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    vars: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const className = props.config?.multiple ? 'magic-ui-text' : 'magic-ui-text magic-ui-text--single-line';\n\n    const displayText = computed(() => {\n      const divEle = document.createElement('div');\n      if (!props.config.text) {\n        return '';\n      }\n      divEle.innerHTML = (props.config.text as any) || '';\n      const ele: any = divEle.querySelectorAll('.magic-ui__dynamic-data-link');\n      // eslint-disable-next-line @typescript-eslint/prefer-for-of\n      for (let i = 0; i < ele.length; i++) {\n        const datavalue = ele[i]?.getAttribute('data-value');\n        ele[i].innerText = datavalue;\n      }\n      const emitData = divEle.innerText;\n      return emitData;\n    });\n\n    return {\n      // boxshadow\n      boxshadow: computed(() => {\n        const getBoxShadow = (val: any) =>\n          `${val.boxShadowX || 0}px ${val.boxShadowY || 0}px ${val.boxShadowBlurR || 0}px ${\n            val.boxShadowSpreadR || 0\n          }px ${val.boxShadowColor || 'rgba(0,0,0,0)'}`.replace(/n/, '');\n        return getBoxShadow(props.config);\n      }),\n      // 外框属性\n      style: computed(() => {\n        // 背景渐变色\n        let backgroundImage;\n        const { color1, color2, deg } = props?.config;\n        if (color1 && color2) {\n          backgroundImage = `linear-gradient(${deg}deg,${color1},${color2})`;\n        } else {\n          backgroundImage = '';\n        }\n        // 获取boxshdow属性\n\n        const style = {\n          textDecoration: props.config.underline ? 'underline' : 'none',\n          fontStyle: props.config.italic ? 'oblique' : 'normal',\n          backgroundImage,\n        };\n        return style;\n      }),\n      // 区分文字和文字框\n      innerStyle: computed(() => {\n        const { textDeg, textColor1, textColor2 } = props.config;\n\n        let style = {};\n        // 文字渐变色\n        if (textColor1 && textColor2) {\n          style = {\n            ...style,\n            backgroundImage: `linear-gradient(${textDeg}deg,${textColor1},${textColor2})`,\n            color: 'transparent',\n            '-webkit-background-clip': 'text',\n          };\n        }\n        //  多行文字实现省略号\n        if (props.config?.multiple) {\n          style = {\n            ...style,\n            textOverflow: 'ellipsis',\n            display: '-webkit-box',\n            overflow: 'hidden',\n            '-webkit-line-clamp': props.config?.lineClamp,\n            '-webkit-box-orient': 'vertical',\n          };\n        }\n        // 文字阴影\n        const getTextShadow = (shadowType: string) => {\n          const map: Map<string, any> = new Map([\n            ['', {}],\n            ['innerShadow1', { textShadow: '3px 3px 5px #999' }],\n            ['innerShadow2', { textShadow: '3px 3px 5px #666' }],\n            ['innerShadow3', { textShadow: '3px 3px 5px #333' }],\n            ['outShadow1', { textShadow: '-3px -3px 5px #999' }],\n            ['outShadow2', { textShadow: '-3px -3px 5px #666' }],\n            ['outShadow3', { textShadow: '-3px -3px 5px #333' }],\n            ['dropShadow1', { filter: 'drop-shadow(0px 0px 5px #999)' }],\n            ['dropShadow2', { filter: 'drop-shadow(0px 0px 5px #666)' }],\n            ['dropShadow3', { filter: 'drop-shadow(0px 0px 5px #333)' }],\n            ['3d', { textShadow: '-1px 1px #bbb,-2px 2px #bbb,-3px 3px #bbb,-4px 4px #bbb,-5px 5px #bbb' }],\n          ]);\n          return map.get(shadowType);\n        };\n        const textStyle: object = getTextShadow(props.config.textShadow);\n\n        return { ...style, ...textStyle };\n      }),\n      displayText,\n      className,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n.text-out-box {\n  display: inline-block;\n}\n</style>\n"],"names":["_sfc_main","props","className","_a","displayText","divEle","ele","datavalue","val","backgroundImage","color1","color2","deg","textDeg","textColor1","textColor2","style","_b","textStyle","shadowType","_sfc_render","_ctx","_cache","$props","$setup","$data","$options"],"mappings":"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"}