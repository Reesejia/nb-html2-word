import{l as h,s as S}from"./commonConfig.81e6abfa.js";import{u as v}from"./useApp.8bd6dbd4.js";import{u as C,a as D}from"./useStyle.1d5c1b91.js";import{s as L,a as B,b as R,c as z}from"./util.80e82fe7.js";import{_ as V}from"./index.d2badf28.js";const k=Vue.defineComponent({__name:"index",props:{config:{type:null,required:!0}},setup(b){const r=b;v(r);const y=Vue.ref(null),i=Vue.shallowRef(),g=()=>{const e=r.config,{dataList:n,colList:t}=e.dataSourceModel,x=[e.borderRadiusLT,e.borderRadiusRT,e.borderRadiusRB,e.borderRadiusLB].map(a=>Number(a||0)),o=n.reduce((a,l)=>{const{xAxisData:c,seriesData:s}=a;return l.forEach((u,f)=>{if(f===0)c.push(u);else{const m=f-1;s[m]=s[m]||{data:[]};const p=s[m];p.type="bar";const _=t==null?void 0:t[f];p.name=_.label,p.color=_.color,p.data.push({value:u,itemStyle:z(u,{borderRadius:x,orient:d}),label:S(e,{isBar:!0,value:u,orient:d})})}}),a},{xAxisData:[],seriesData:[]});return{xAxisData:o.xAxisData,series:o.seriesData,legendData:t==null?void 0:t.slice(1).map(a=>a.label)}};let d;Vue.onMounted(()=>{const{config:e}=r,n={legend:[{...h(e),data:[]}],grid:{top:e.gridTop,right:e.gridRight,bottom:e.gridBottom,left:e.gridLeft,containLabel:!0},tooltip:[{show:e.tooltip,trigger:"axis",axisPointer:{type:"cross"},confine:!0}],xAxis:[{type:"category",nameGap:5,data:[],axisLabel:{textStyle:{color:e.xAxisFontSizeColor},fontSize:e.xAxisFontSize}}],yAxis:[{type:"value",nameGap:5,axisLabel:{textStyle:{color:e.yAxisFontSizeColor},fontSize:e.yAxisFontSize},splitLine:{lineStyle:{type:e.splitLineType,color:e.splitLineColor}}}],series:[]};i.value=C(n,y).value,Vue.watch(()=>r.config,(t,x={orient:"vertical"})=>{var c;const o=(c=i.value)==null?void 0:c.getOption(),a=L(t,x),l=t.orient==="horizontal"?"yAxis":"xAxis";if(a("orient")){d=t.orient;const s=o.xAxis;o.xAxis=o.yAxis,o.yAxis=s}B(a,o,t,{suffixFormat:!0,orientAxis:l}),R(o,g,l),i.value.setOption(o,!0)},{immediate:!0})});const A=D(r,i);return(e,n)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"t-inline-block magic-ui-echart-module",ref_key:"refCbar",ref:y,style:Vue.normalizeStyle(Vue.unref(A))},null,4))}});const U=V(k,[["__scopeId","data-v-20a37b2c"],["__file","/Users/droden/dirs/new_banker_pro/found-pro/tmagic-editor/packages/ui/src/cbar/src/index.vue"]]);export{U as default};
//# sourceMappingURL=index.86e12368.js.map
