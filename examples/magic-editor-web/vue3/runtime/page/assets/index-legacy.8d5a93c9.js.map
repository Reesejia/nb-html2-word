{"version":3,"file":"index-legacy.8d5a93c9.js","sources":["../../../../../../packages/ui/src/video/src/index.vue"],"sourcesContent":["<template>\n  <div class=\"tmagic-editor-video\">\n    <video class=\"video-box\" :src=\"config.src\" alt=\"video\" controls ref=\"video\">\n      <source :src=\"config.src\" type=\"video/mp4\" />\n      <track label=\"English\" kind=\"captions\" srclang=\"en\" :src=\"config.src\" default />\n    </video>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, getCurrentInstance, onMounted, PropType, watch } from 'vue';\n\nimport { MVideo } from '../../../src/types';\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MVideo>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    let videoDom = null as any;\n    useApp(props);\n    function setAttr(keyName: string, value: boolean | string): void {\n      if (keyName === 'poster' && !value) {\n        videoDom.poster = '';\n        videoDom.src = props.config.src;\n      } else {\n        videoDom[keyName] = value;\n      }\n    }\n    watch(\n      () => props.config,\n      (newValue, oldValue) => {\n        oldValue.playControl !== newValue.playControl && setAttr('controls', newValue.playControl);\n        oldValue.mute !== newValue.mute && setAttr('muted', newValue.mute);\n        oldValue.loop !== newValue.loop && setAttr('loop', newValue.loop);\n        oldValue.poster !== newValue.poster && setAttr('poster', newValue.poster);\n        oldValue.src !== newValue.src && setAttr('src', newValue.src);\n        videoDom.style.width = `${props.config.style.width}px`;\n      },\n      {\n        deep: true,\n      },\n    );\n    onMounted(() => {\n      videoDom = (getCurrentInstance()?.proxy as any).$refs.video;\n      videoDom.poster = props.config.poster;\n    });\n    return {\n      videoDom,\n    };\n  },\n});\n</script>\n<style lang=\"scss\" scoped>\n.tmagic-editor-video {\n  .video-box {\n    width: 300px;\n  }\n}\n</style>\n"],"names":["_sfc_main","Vue","defineComponent","props","config","type","Object","default","setup","videoDom","setAttr","keyName","value","poster","src","useApp","watch","newValue","oldValue","playControl","mute","loop","style","width","deep","onMounted","getCurrentInstance","proxy","$refs","video","openBlock","createElementBlock","_hoisted_1","createElementVNode","class","_ctx","alt","controls","ref","_hoisted_3","label","kind","srclang"],"mappings":"2TAee,MAAAA,EAAAC,IAAgBC,gBAAA,CAAAC,MAAA,CACtBC,OAAA,CACGC,KAAAC,OACAC,QAAAA,KAAA,CAAA,KAGVC,MAAAL,GAEE,IAAAM,EAAA,KAEA,SAAAC,EAAAC,EAAAC,GACE,WAAAD,GAAAC,EAIEH,EAAAE,GAAAC,GAHAH,EAAAI,OAAA,GACAJ,EAAAK,IAAAX,EAAAC,OAAAU,IAGF,CAoBF,OA3BAC,EAAAZ,GASAF,IAAAe,OAAA,IAAAb,EAAAC,SACc,CAAAa,EAAAC,KAEVA,EAAAC,cAAAF,EAAAE,aAAAT,EAAA,WAAAO,EAAAE,aACAD,EAAAE,OAAAH,EAAAG,MAAAV,EAAA,QAAAO,EAAAG,MACAF,EAAAG,OAAAJ,EAAAI,MAAAX,EAAA,OAAAO,EAAAI,MACAH,EAAAL,SAAAI,EAAAJ,QAAAH,EAAA,SAAAO,EAAAJ,QACAK,EAAAJ,MAAAG,EAAAH,KAAAJ,EAAA,MAAAO,EAAAH,KACAL,EAAAa,MAAAC,MAAA,GAAApB,EAAAC,OAAAkB,MAAAC,SAAA,GACF,CACAC,MAAA,IAIFvB,IAAAwB,WAAA,KACEhB,EAAYR,IAAAyB,sBAAAC,MAAAC,MAAAC,MACZpB,EAAAI,OAAAV,EAAAC,OAAAS,MAAA,IAEF,CAAOJ,WAEP,mHAnDO,OAAAR,IAAA6B,YAAiB7B,IAAA8B,mBAAA,MAAAC,EAAA,CAAA/B,IAAAgC,mBAAA,QAAA,CAAiBC,MAAA,YAAMpB,IAAAqB,EAAA/B,OAAAU,IAAgBsB,IAAA,QAAKC,SAAA,GAClEC,IAAA,SAAA,CAA0CrC,IAAAgC,mBAAA,SAAA,CAAAnB,IAAAqB,EAAA/B,OAAAU,IAC1CT,KAAA,aAAA,KAAA,EAAAkC,GAAsCtC,IAAAgC,mBAAA,QAAA,CAAAO,MAAA,UAAQC,KAAA,WAAYC,QAAA,KAAY5B,IAAAqB,EAAA/B,OAAAU"}