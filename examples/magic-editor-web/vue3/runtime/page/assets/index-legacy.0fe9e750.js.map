{"version":3,"file":"index-legacy.0fe9e750.js","sources":["../../../../../../packages/ui/src/richtext/src/index.vue"],"sourcesContent":["<!-- Test.vue -->\n<template>\n  <div>\n    <span v-html=\"plainHtml\"></span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, watch } from 'vue';\n\nimport { MRichText } from '../../types';\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  name: 'richtext',\n\n  props: {\n    config: {\n      type: Object as PropType<MRichText>,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    useApp(props);\n    const plainHtml = ref();\n\n    watch(\n      () => props.config.html,\n      (html = '') => {\n        const isObject = typeof html === 'object';\n        const value = isObject ? html.text : html;\n        const formatterValue = value.replace(/(?!=font-size:\\s{0,})(\\d+)(pt|px)/g, '0.$1rem');\n\n        // if (isObject) {\n        //   const { indicator } = html;\n        //   if (indicator) {\n        //     formatterValue = formatterValue.replace(/{{(.+?)}}/g, (m, key) => indicator[key] || m);\n        //   }\n        // }\n        const span = document.createElement('span');\n        span.innerHTML = formatterValue;\n        const dynamicList: any = span.querySelectorAll('.magic-ui__dynamic-data-link');\n        for (let i = 0; i < dynamicList?.length; i++) {\n          const datavalue = dynamicList[i]?.getAttribute('data-value');\n          dynamicList[i].innerText = datavalue;\n        }\n        const htmlTemps = span.innerHTML;\n        plainHtml.value = htmlTemps;\n      },\n      {\n        immediate: true,\n      },\n    );\n\n    return {\n      plainHtml,\n    };\n  },\n});\n</script>\n"],"names":["_sfc_main","Vue","defineComponent","name","props","config","type","Object","default","model","setup","useApp","plainHtml","ref","watch","html","formatterValue","text","replace","span","document","createElement","innerHTML","dynamicList","querySelectorAll","i","length","datavalue","getAttribute","innerText","htmlTemps","value","immediate"],"mappings":"2KAae,MAAAA,EAAAC,IAAgBC,gBAAA,CAAAC,KAAA,WACvBC,MAAA,CAECC,OAAA,CACGC,KAAAC,OACAC,QAAAA,KAAA,CAAA,IAERC,MAAA,CAEOH,KAAAC,OACCC,QAAAA,KAAA,CAAA,KAGVE,MAAAN,GAGEO,EAAAP,GACA,MAAAQ,EAAkBX,IAAIY,MA8BtB,OA5BAZ,IAAAa,OAAA,IAAAV,EAAAC,OAAAU,OACqB,CAAAA,EAAA,MAEjB,MAEAC,GAFA,iBAAAD,EACAA,EAAAE,KAAAF,GACAG,QAAA,qCAAA,WAQAC,EAAAC,SAAAC,cAAA,QACAF,EAAAG,UAAAN,EACA,MAAAO,EAAAJ,EAAAK,iBAAA,gCACA,IAAA,IAAAC,EAAA,EAAAA,EAAAF,GAAAG,OAAAD,IAAA,CACE,MAAAE,EAAAJ,EAAAE,IAAAG,aAAA,cACAL,EAAAE,GAAAI,UAAAF,CAA2B,CAE7B,MAAAG,EAAAX,EAAAG,UACAV,EAAAmB,MAAAD,CAAA,GACF,CACAE,WAAA,IAKF,CAAOpB,YAEP"}