import{u as b,a as S,L}from"./useStyle.1d5c1b91.js";import{u as A}from"./useApp.8bd6dbd4.js";import{b as x,s as C,a as v}from"./util.80e82fe7.js";import{_ as D}from"./index.d2badf28.js";const k=Vue.defineComponent({__name:"index",props:{config:{type:null,required:!0}},setup(h){const i=h;A(i);const f=Vue.ref(null),u=Vue.shallowRef(),g=()=>{const{dataList:e,colList:o}=i.config.dataSourceModel,c=e.reduce((t,p)=>{const{xAxisData:s,seriesData:r}=t;return p.forEach((d,n)=>{if(n===0)s.push(d);else{const a=n-1;r[a]=r[a]||{data:[]},r[a].data.push(d);const l=o==null?void 0:o[n];r[a].color=l.color,r[a].name=l.label,r[a].gradient=l.gradient}}),t},{xAxisData:[],seriesData:[]});return{xAxisData:c.xAxisData,series:c.seriesData.map(t=>({name:t.name,data:t.data,color:t.color,type:"line",smooth:i.config.smooth,areaStyle:m(i.config.hasAreaStyle,t.gradient)})),legendData:o==null?void 0:o.slice(1).map(t=>t.label)}},m=(e,o)=>e?{opacity:1,color:new L(0,0,0,1,[{offset:0,color:o[0]},{offset:1,color:o[1]}])}:void 0;Vue.onMounted(()=>{var c;const{config:e}=i,o={legend:[{icon:"roundRect",itemWidth:e.legendItemWidth,itemHeight:e.legendItemHeight,data:(c=e.dataSourceModel.colList)==null?void 0:c.slice(1).map(t=>t.label)}],grid:{top:e.gridTop,right:e.gridRight,bottom:e.gridBottom,left:e.gridLeft,containLabel:!0},tooltip:{show:e.tooltip,trigger:"axis",axisPointer:{type:"cross"}},xAxis:[{type:"category",data:[],boundaryGap:!1,axisLabel:{textStyle:{color:e.axisLabelTextColor}},axisLine:{lineStyle:{color:e.xAxisAxisLineColor}}}],yAxis:[{type:"value",axisLabel:{textStyle:{color:e.axisLabelTextColor}},splitLine:{lineStyle:{type:e.splitLineType,color:e.splitLineColor}}}],series:[]};x(o,g),u.value=b(o,f).value,Vue.watch(()=>i.config,(t,p)=>{var d,n;const s=(d=u.value)==null?void 0:d.getOption();if(!s)return;const r=C(t,p);if(v(r,s,t),r("smooth")&&s.series.forEach(a=>{a.smooth=t.smooth}),r("hasAreaStyle")){const a=(n=t.dataSourceModel)==null?void 0:n.colList;s.series=s.series.map((l,_)=>(l.areaStyle=m(t.hasAreaStyle,(a==null?void 0:a[_+1]).gradient),l))}x(s,g),u.value.setOption(s)})});const y=S(i,u);return(e,o)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"t-inline-block magic-ui-echart-module",ref_key:"refContainer",ref:f,style:Vue.normalizeStyle(Vue.unref(y))},null,4))}});const M=D(k,[["__scopeId","data-v-421bebd5"],["__file","/Users/droden/dirs/new_banker_pro/found-pro/tmagic-editor/packages/ui/src/carea/src/index.vue"]]);export{M as default};
//# sourceMappingURL=index.723767d9.js.map
