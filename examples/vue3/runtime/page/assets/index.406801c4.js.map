{"version":3,"file":"index.406801c4.js","sources":["../../../../../../packages/ui/src/video/src/index.vue"],"sourcesContent":["<template>\n  <div class=\"tmagic-editor-video\">\n    <video class=\"video-box\" :src=\"config.src\" alt=\"video\" controls ref=\"video\">\n      <source :src=\"config.src\" type=\"video/mp4\" />\n      <track label=\"English\" kind=\"captions\" srclang=\"en\" :src=\"config.src\" default />\n    </video>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, getCurrentInstance, onMounted, PropType, watch } from 'vue';\n\nimport { MVideo } from '../../../src/types';\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MVideo>,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    let videoDom = null as any;\n    useApp(props);\n    function setAttr(keyName: string, value: boolean | string): void {\n      if (keyName === 'poster' && !value) {\n        videoDom.poster = '';\n        videoDom.src = props.config.src;\n      } else {\n        videoDom[keyName] = value;\n      }\n    }\n    watch(\n      () => props.config,\n      (newValue, oldValue) => {\n        oldValue.playControl !== newValue.playControl && setAttr('controls', newValue.playControl);\n        oldValue.mute !== newValue.mute && setAttr('muted', newValue.mute);\n        oldValue.loop !== newValue.loop && setAttr('loop', newValue.loop);\n        oldValue.poster !== newValue.poster && setAttr('poster', newValue.poster);\n        oldValue.src !== newValue.src && setAttr('src', newValue.src);\n        videoDom.style.width = `${props.config.style.width}px`;\n      },\n      {\n        deep: true,\n      },\n    );\n    onMounted(() => {\n      videoDom = (getCurrentInstance()?.proxy as any).$refs.video;\n      videoDom.poster = props.config.poster;\n    });\n    return {\n      videoDom,\n    };\n  },\n});\n</script>\n<style lang=\"scss\" scoped>\n.tmagic-editor-video {\n  .video-box {\n    width: 300px;\n  }\n}\n</style>\n"],"names":["_sfc_main","props","videoDom","useApp","setAttr","keyName","value","newValue","oldValue","_a","_hoisted_1","_ctx","_hoisted_3"],"mappings":"iFAeA,MAAeA,EAAA,IAAgB,gBAAA,CAAA,MAAA,CACtB,OAAA,CACG,KAAA,OACA,QAAA,KAAA,CAAA,EACW,CACnB,EACF,MAAAC,EAAA,CAEE,IAAAC,EAAA,KACAC,EAAAF,CAAA,EACA,SAAAG,EAAAC,EAAAC,EAAA,CACED,IAAA,UAAA,CAAAC,GACEJ,EAAA,OAAA,GACAA,EAAA,IAAAD,EAAA,OAAA,KAEAC,EAAAG,GAAAC,CACF,CAEF,WAAA,MAAA,IAAAL,EAAA,OACc,CAAAM,EAAAC,IAAA,CAEVA,EAAA,cAAAD,EAAA,aAAAH,EAAA,WAAAG,EAAA,WAAA,EACAC,EAAA,OAAAD,EAAA,MAAAH,EAAA,QAAAG,EAAA,IAAA,EACAC,EAAA,OAAAD,EAAA,MAAAH,EAAA,OAAAG,EAAA,IAAA,EACAC,EAAA,SAAAD,EAAA,QAAAH,EAAA,SAAAG,EAAA,MAAA,EACAC,EAAA,MAAAD,EAAA,KAAAH,EAAA,MAAAG,EAAA,GAAA,EACAL,EAAA,MAAA,MAAA,GAAAD,EAAA,OAAA,MAAA,SAA6C,EAC/C,CACA,KAAA,EACQ,CACR,EAEF,IAAA,UAAA,IAAA,OACEC,IAAYO,EAAA,IAAA,mBAAA,IAAA,YAAAA,EAAA,OAAA,MAAA,MACZP,EAAA,OAAAD,EAAA,OAAA,MAA+B,CAAA,EAEjC,CAAO,SAAAC,CACL,CACF,CAEJ,CAAA,8FArDW,OAAA,IAAA,YAAiB,IAAA,mBAAA,MAAAQ,EAAA,CAAA,IAAA,mBAAA,QAAA,CAAiB,MAAA,YAAM,IAAAC,EAAA,OAAA,IAAgB,IAAA,QAAK,SAAA,GAClE,IAAA,OAAA,EAAA,CAA0C,IAAA,mBAAA,SAAA,CAAA,IAAAA,EAAA,OAAA,IAC1C,KAAA,WAAA,EAAA,KAAA,EAAAC,CAAA,EAAsC,IAAA,mBAAA,QAAA,CAAA,MAAA,UAAQ,KAAA,WAAY,QAAA,KAAY,IAAAD,EAAA,OAAA"}