import{u as A,a as _,L as b}from"./useStyle.1d5c1b91.js";import{l as L,s as D}from"./commonConfig.81e6abfa.js";import{u as v}from"./useApp.8bd6dbd4.js";import{s as C,a as z,g as F,b as O}from"./util.80e82fe7.js";import{_ as k}from"./index.d2badf28.js";const T=Vue.defineComponent({__name:"index",props:{config:{type:null,required:!0}},setup(y){const i=y;v(i);const f=Vue.ref(null),x=Vue.shallowRef();let m=[];const h=()=>{const{dataList:e,colList:o}=i.config.dataSourceModel,t=e.reduce((l,r)=>{const{xAxisData:c,seriesData:d}=l;return r.forEach((u,a)=>{if(a===0)c.push(u);else{const n=a-1;d[n]=d[n]||{data:[]};const s=d[n];s.type="line",s.data.push(u);const p=o==null?void 0:o[a];s.color=p.color,s.name=p.label,s.label=D(i.config),s.gradient=p.gradient,s.smooth=i.config.smooth,s.areaStyle=g(i.config.hasAreaStyle,p.gradient,i.config.areaStyleOpacity),s.symbol=i.config.markSymbol,s.symbolSize=i.config.symbolSize}}),l},{xAxisData:[],seriesData:[]});return m=t.xAxisData,{xAxisData:t.xAxisData,series:t.seriesData,legendData:o==null?void 0:o.slice(1).map(l=>l.label)}},g=(e,o,t)=>e?{color:new b(0,0,0,1,[{offset:0,color:o[0]},{offset:1,color:o[t?1:0]}])}:void 0;Vue.onMounted(()=>{const{config:e}=i,o={legend:[{...L(e),data:[]}],grid:{top:e.gridTop,right:e.gridRight,bottom:e.gridBottom,left:e.gridLeft,containLabel:!0},tooltip:[{show:e.tooltip,trigger:"axis",axisPointer:{type:"cross"},confine:!0}],xAxis:[{type:"category",nameGap:5,data:[],boundaryGap:!1,axisLabel:{textStyle:{color:e.xAxisFontSizeColor},fontSize:e.xAxisFontSize},axisLine:{lineStyle:{color:e.xAxisAxisLineColor}}}],yAxis:[{type:"value",nameGap:5,axisLabel:{textStyle:{color:e.yAxisFontSizeColor},fontSize:e.yAxisFontSize},splitLine:{lineStyle:{type:e.splitLineType,color:e.splitLineColor}}}],series:[]};x.value=A(o,f).value,Vue.watch(()=>i.config,(t,l={})=>{var d,u;const r=(d=x.value)==null?void 0:d.getOption(),c=C(t,l);if(z(c,r,t,{suffixFormat:!0}),c("smooth")&&r.series.forEach(a=>{a.smooth=t.smooth}),c("hasAreaStyle")){const a=(u=t.dataSourceModel)==null?void 0:u.colList;r.series=r.series.map((n,s)=>(n.areaStyle=g(t.hasAreaStyle,(a==null?void 0:a[s+1]).gradient,t.getAreaStyle),n))}if(c("xAxisHeadTailTextFormat","xAxisFontSize")){const a=m.length-1,n=t.xAxisHeadTailTextFormat&&a>0;Object.assign(r.xAxis[0].axisLabel,n?F(a,t.xAxisFontSize):{formatter:void 0,rich:void 0})}O(r,h),x.value.setOption(r,!0)},{immediate:!0})});const S=_(i,x);return(e,o)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"t-inline-block magic-ui-echart-module",ref_key:"refContainer",ref:f,style:Vue.normalizeStyle(Vue.unref(S))},null,4))}});const U=k(T,[["__scopeId","data-v-eda6676e"],["__file","/Users/droden/dirs/new_banker_pro/found-pro/tmagic-editor/packages/ui/src/cline/src/index.vue"]]);export{U as default};
//# sourceMappingURL=index.6a881698.js.map
