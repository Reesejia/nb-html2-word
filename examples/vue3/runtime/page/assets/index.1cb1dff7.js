import{l as h}from"./commonConfig.81e6abfa.js";import{u as b}from"./useApp.8bd6dbd4.js";import{u as A,a as L}from"./useStyle.1d5c1b91.js";import{s as S,a as D,g as C,b as v}from"./util.80e82fe7.js";import{_ as k}from"./index.d2badf28.js";const T=Vue.defineComponent({__name:"index",props:{config:{type:null,required:!0}},setup(y){const c=y;b(c);const m=Vue.ref(null),u=Vue.shallowRef();let f=[];const g=()=>{const{dataList:e,colList:a}=c.config.dataSourceModel,s=e.reduce((t,d)=>{const{xAxisData:i,seriesData:r}=t;return d.forEach((n,l)=>{if(l===0)i.push(n);else{const x=l-1;r[x]=r[x]||{data:[]};const o=r[x],p=a[l];o.name=p.label,o.type=p.type,p.type==="candlestick"?o.data.push(n.split(",")):(o.symbol=p.hasSymbol?"emptyCircle":"none",o.color=p.color,o.lineStyle={opacity:.5},o.data.push(n))}}),t},{xAxisData:[],seriesData:[]});return f=s.xAxisData,{xAxisData:s.xAxisData,series:s.seriesData,legendData:a==null?void 0:a.slice(1).map(t=>t.label)}};Vue.onMounted(()=>{var s;const{config:e}=c,a={legend:[{...h(e),data:(s=e.dataSourceModel.colList)==null?void 0:s.slice(1).map(t=>t.label)}],grid:{top:e.gridTop,right:e.gridRight,bottom:e.gridBottom,left:e.gridLeft,containLabel:!0},tooltip:[{show:e.tooltip,trigger:"axis",axisPointer:{type:"cross"}}],xAxis:[{type:"category",data:[],boundaryGap:!1,axisLabel:{textStyle:{color:e.axisLabelTextColor},fontSize:e.xAxisFontSize},axisLine:{onZero:!1,lineStyle:{color:e.xAxisAxisLineColor}},min:"dataMin",max:"dataMax"}],yAxis:[{type:"value",axisLabel:{textStyle:{color:e.axisLabelTextColor}},splitLine:{lineStyle:{type:e.splitLineType,color:e.splitLineColor}}}],series:[]};u.value=A(a,m).value,Vue.watch(()=>c.config,(t,d={})=>{var n;const i=(n=u.value)==null?void 0:n.getOption(),r=S(t,d);if(D(r,i,t,{suffixFormat:!0}),r("xAxisHeadTailTextFormat","xAxisFontSize")){const l=f.length-1,x=t.xAxisHeadTailTextFormat&&l>0;Object.assign(i.xAxis[0].axisLabel,x?C(l,t.xAxisFontSize):{formatter:void 0,rich:void 0})}v(i,g),u.value.setOption(i,!0)},{immediate:!0})});const _=L(c,u);return(e,a)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"t-inline-block magic-ui-echart-module",ref_key:"refKCline",ref:m,style:Vue.normalizeStyle(Vue.unref(_))},null,4))}});const B=k(T,[["__scopeId","data-v-8027c00c"],["__file","/Users/droden/dirs/new_banker_pro/found-pro/tmagic-editor/packages/ui/src/ckline/src/index.vue"]]);export{B as default};
//# sourceMappingURL=index.1cb1dff7.js.map
